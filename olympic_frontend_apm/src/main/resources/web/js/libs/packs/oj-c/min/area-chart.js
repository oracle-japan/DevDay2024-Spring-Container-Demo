define("oj-c/hooks/UNSAFE_useDataProvider/utils",["require","exports"],(function(require,e){"use strict";function t(e,t,r,a){const o=[...a];return e.forEach(((e,a)=>{const i={data:t[a],key:r[a]?.key,metadata:r[a]};e>=0?o.splice(e,0,i):o.push(i)})),o}async function r(e,t){const r=[],a=(await e.fetchByKeys({keys:t})).results;for(const e of t)if(a.has(e)){const t=a.get(e);r.push({...t,key:e})}return r}function a(e,t){return e.has(t)?e.get(t):-1}function o(e,t){const r=[...t];return e.sort(((e,t)=>t-e)),e.forEach((e=>{e<r.length&&r.splice(e,1)})),r}Object.defineProperty(e,"__esModule",{value:!0}),e.getUpdatedItemsFromMutationDetail=void 0,e.getUpdatedItemsFromMutationDetail=async function(e,i,s){const{add:n,remove:l,update:d}=e??{},u=new Map;for(const[e,t]of i.entries())u.set(t.key,e);let c=[...i];return l&&(c=function(e,t,r){const{indexes:i,keys:s}=e;let n=[...t];i?.length?n=o(i,n):s?.size&&(n=function(e,t,r){const i=[];return e.forEach((e=>{const t=a(r,e);-1!==t&&i.push(t)})),o(i,t)}(s,n,r));return n}(l,c,u)),n&&(c=await async function(e,o,i,s){const{addBeforeKeys:n,data:l,indexes:d,keys:u,metadata:c}=e;let p=[...o],h=l||[],g=c||[];if(0===h.length&&u?.size){const e=await r(s,u)??[];h=e.map((e=>e.data)),g=e.map((e=>e.metadata))}0===g.length&&u?.size&&(g=[...u].map((e=>({key:e}))));h.length&&(p=d?.length?t(d,h,g,p):n?.length?function(e,r,o,i){const s=[],n=[];return e.forEach((e=>{s.push(a(i,e)),n.push({key:e})})),t(s,r,n,o)}(n,h,p,i):function(e,r,a){return t(new Array(e.length).fill(-1),e,r,a)}(h,g,p));return p}(n,c,u,s)),d&&(c=await async function(e,t,o,i){const{data:s,indexes:n,keys:l,metadata:d}=e;let u=[...t],c=s||[],p=d||[];if(0===c.length&&l?.size){const e=await r(i,l)??[];c=e.map((e=>e.data)),p=e.map((e=>e.metadata))}0===p.length&&l?.size&&(p=[...l].map((e=>({key:e}))));c.length&&(n?.length?u=function(e,t,r,a){const o=[...a];return e.forEach(((e,a)=>{if(o[e]){const i={data:t[a],key:r[a]?.key,metadata:r[a]};o.splice(e,1,i)}})),o}(n,c,p,u):l?.size&&(u=function(e,t,r,o,i){const s=[...o];return e.forEach((e=>{const o=a(i,e),n={data:t[o],key:r[o]?.key,metadata:r[o]};o>=0&&s.splice(o,1,n)})),s}(l,c,p,u,o)));return u}(d,c,u,s)),c}})),define("oj-c/hooks/UNSAFE_useDataProvider/DataProviderHandler",["require","exports","./utils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataProviderHandler=void 0;e.DataProviderHandler=class{constructor(e,r,a){this.handleMutateEvent=async e=>{const{detail:r}=e,a=this.addBusyState("updating data from mutation event"),o=await(0,t.getUpdatedItemsFromMutationDetail)(r,this.currentData,this.dataProvider);a?.(),this.currentData=o,this.callback?.onDataUpdated?.(o)},this.handleRefreshEvent=()=>{this._fetchDataAndNotify()},this.addBusyState=r,this.callback=a,this.dataProvider=e,this.currentData=[],e.addEventListener("refresh",this.handleRefreshEvent),e.addEventListener("mutate",this.handleMutateEvent),this._fetchDataAndNotify()}destroy(){this.callback=void 0,this.currentData=[],this.dataProvider.removeEventListener("refresh",this.handleRefreshEvent),this.dataProvider.removeEventListener("mutate",this.handleMutateEvent)}async _fetchData(){const e=[],t=this.dataProvider.fetchFirst({size:-1});for await(const r of t){const t=r.data.map(((e,t)=>({data:e,key:r.metadata[t].key,metadata:r.metadata[t]})));e.push(...t)}return this.currentData=e.slice(),e}async _fetchDataAndNotify(){const e=this.addBusyState("fetching data"),t=await this._fetchData();this.callback?.onDataUpdated?.(t),e()}}})),define("oj-c/hooks/UNSAFE_useDataProvider/useDataProvider",["require","exports","preact/hooks","./DataProviderHandler"],(function(require,e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useDataProvider=void 0,e.useDataProvider=function({addBusyState:e,data:a}){const[o,i]=(0,t.useState)([]),s=(0,t.useRef)();return(0,t.useEffect)((()=>(void 0!==a&&(s.current=new r.DataProviderHandler(a,e,{onDataUpdated:i})),()=>{s.current?.destroy(),s.current=void 0})),[a,e]),{data:o}}})),define("oj-c/utils/UNSAFE_vizUtils/TemplateHandler",["require","exports","preact/compat"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processTemplate=e.processNodeTemplate=void 0;const r=e=>Object.keys(e).reduce(((t,r)=>("children"===r||(t[(e=>e[0].toLowerCase()!==e[0]?e.toLowerCase().replace(/-./g,(e=>e[1].toUpperCase())):e)(r)]=e[r]),t)),{});e.processNodeTemplate=(e,a,o,i)=>{const s=a(o),n=t.Children.toArray(s).find((e=>{if(e&&e.props)return(e.props?.children?.type||e.type)===i})),l=n?.type===i?n.props:(n?.props?.children).props,d=e.key||e.metadata?.key;return l?{...r(l),key:d,id:d,_itemData:e.data}:{key:d,id:d,_itemData:e.data}};e.processTemplate=(t,r,a,o)=>t.map(((t,i)=>(0,e.processNodeTemplate)(t,r,a(t,i),o)))})),define("oj-c/utils/PRIVATE_chartUtils/lineAreaUtils",["require","exports","@oracle/oraclejet-preact/utils/UNSAFE_visUtils"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.transformValueFormats=e.transformGroup=e.transformSeries=e.transformItem=void 0;const r=(0,t.getColorRamp)();e.transformItem=function(e,t){return{markerColor:e.color||t.markerColor,accessibleLabel:e.shortDesc,value:e.value,label:e.label,id:e.id,drilling:e.drilling||t.drilling,isMarkerDisplayed:e.markerDisplayed&&"off"!==e.markerDisplayed||t.markerDisplayed&&"off"!==t.markerDisplayed,markerType:"auto"!==e.markerShape&&e.markerShape||"auto"!==t.markerShape&&t.markerShape,markerSize:void 0!==e.markerSize&&e.markerSize||t.markerSize}},e.transformSeries=function(e,t){return{lineColor:e.color||r[t%r.length],areaColor:e.areaColor||e.color||r[t%r.length],accessibleLabel:e.shortDesc,drilling:e.drilling,lineStyle:e.lineStyle,lineType:e.lineType,lineWidth:e.lineWidth,markerShape:e.markerShape,markerColor:e.markerColor||r[t%r.length],markerDisplayed:e.markerDisplayed,markerSize:e.markerSize,id:e.id,name:e.name,items:e.items}},e.transformGroup=function(e){return{drilling:e.drilling,name:e.name,id:e.id,accessibleLabel:e.shortDesc}},e.transformValueFormats=function(e){if(!e)return;const t={};return e.value&&(t.value={isDisplayed:"off"!==e.value?.tooltipDisplay,label:e.value?.tooltipLabel,format:e.value?.converter?.format}),e.series&&(t.series={isDisplayed:"off"!==e.series?.tooltipDisplay,label:e.series?.tooltipLabel}),e.group&&(t.group={isDisplayed:"off"!==e.group?.tooltipDisplay,label:e.group?.tooltipLabel}),t}})),define("oj-c/hooks/UNSAFE_useChartData/dataUtil",["require","exports","ojs/ojlogger","../../utils/UNSAFE_vizUtils/TemplateHandler","../../utils/PRIVATE_chartUtils/lineAreaUtils"],(function(require,e,t,r,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createGroupsAndSeries=void 0;e.createGroupsAndSeries=(e,o,i,s,n,l,d,u,c)=>{const p=o&&n?(0,r.processTemplate)(e,o,((e,t)=>({data:e.data,key:e.key,index:t})),n):e.map((e=>({id:e.key,_itemData:e.data,...e.data}))),h=new Map,g=s||c?new Map:null,m=new Map,f=(e,t)=>{const o=[...e.keys()],i=new Map,n=o.map(((o,n)=>{let l;const u=e.get(o),h=u?.value,m=u?.groups;let y;return(s||c)&&h&&(y=((e,t,r)=>{const a={ids:t,depth:t?.length,index:r};return Object.defineProperty(a,"items",{get:()=>g?.get(e).map((e=>{const t=p[e];return{data:t._itemData,key:t.id,index:e}}))}),a})(h,[...t,o],n),i.set(o,y)),l=s&&d?(0,r.processNodeTemplate)({key:h},s,y,d):{},l.id=o,l.name=null==l.name?o:l.name,m?l.groups=f(m,[...t,o]):(l=(0,a.transformGroup)(l),Object.defineProperty(l,"symbol",{value:h,enumerable:!1})),l}));return c&&n.sort(((e,t)=>c(i.get(e.id),i.get(t.id)))),n},y=e=>{const t=[];return e.forEach((e=>{e.groups?t.push(...y(e.groups)):e.symbol&&t.push(e.symbol)})),t};p.forEach(((e,t)=>{const r=(e=>{let t=h;const r=[];for(let a=0;a<e?.length;a++){const o=e[a];let i=t.get(o);i||(i={value:Symbol(o)},a!==e?.length-1&&(i.groups=new Map),t.set(o,i)),i.value&&r.push(i.value),i.groups&&(t=i.groups)}return r})(e.groupId);((e,t,r)=>{let a=m.get(e);a||(a=new Map,m.set(e,a));const o=t[t?.length-1];void 0===a.get(o)&&(a.set(o,r),g&&t.forEach((e=>{let t=g.get(e);t||(t=[],g.set(e,t)),t.push(r)})))})(e.seriesId,r,t)}));const v=(()=>{try{return f(h,[])}catch(e){return t.error(e),[]}})(),D=(e=>{let o;try{const t=new Map,s=y(e);return o=[...m.keys()].map(((e,a)=>{const o=m.get(e);let n,d;return(i||u)&&o&&(n=((e,t,r,a)=>{const o={id:e,index:t};return Object.defineProperty(o,"items",{get:()=>{const e=[];return r.forEach((t=>{const r=a.get(t);if(null!=r){const t=p[r];e.push({data:t._itemData,key:t.id,index:r})}})),e}}),o})(e,a,s,o),t.set(e,n)),d=i&&n&&l?(0,r.processNodeTemplate)({key:e},i,n,l):{id:e},d.name=null==d.name?String(e):d.name,d.items=s.map((e=>{let t=null;if(o){const r=o.get(e);null!=r&&(t=p[r])}return t})),d})),u&&o.sort(((e,r)=>u(t.get(e.id),t.get(r.id)))),o.map(((e,t)=>(e.items=e.items.map((t=>(0,a.transformItem)(t,e))),(0,a.transformSeries)(e,t))))}catch(e){t.error(e),o=[]}return o})(v);return{groups:v,series:D}}})),define("oj-c/hooks/UNSAFE_useChartData/useChartData",["require","exports","../UNSAFE_useDataProvider/useDataProvider","./dataUtil"],(function(require,e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useChartData=void 0,e.useChartData=function(e,a,o,i,s,n,l,d,u,c){const{data:p}=(0,t.useDataProvider)({data:e,addBusyState:a}),{series:h,groups:g}=(0,r.createGroupsAndSeries)(p,o,i,s,n,l,d,u,c);return{series:h,groups:g,getDataItem:(e,t)=>h[e].items[t]}}})),define("oj-c/utils/PRIVATE_chartUtils/events",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getChartEventsHandler=e.getIdFromDetail=void 0;e.getIdFromDetail=function(e,t,r){const{seriesIndex:a,groupIndex:o}=e;if(void 0!==a)return void 0===o?t[a].id:r(a,o).id};e.getChartEventsHandler=(e,t,r,a,o,i)=>({itemDrillHandler:o=>{"on"===r&&a?.(((e,t,r)=>({data:e[r.seriesIndex],group:t[r.groupIndex].id,groupData:t[r.groupIndex],id:r.id,itemData:e[r.seriesIndex].items,seriesId:e[r.seriesIndex].id,seriesData:e[r.seriesIndex]}))(e,t,o))},groupDrillHandler:a=>{"on"!==r&&"groupsOnly"!==r||o?.(((e,t,r)=>({group:t[r.groupIndex].id,groupData:t[r.groupIndex],id:r.id,items:e[r.groupIndex].items}))(e,t,a))},seriesDrillHandler:t=>{"seriesOnly"!==r&&"on"!==r||i?.(((e,t)=>{const{itemIndex:r}=t;return{id:e[r].id,items:e[r].items,series:e[r].id,seriesData:e}})(e,t))}})})),define("oj-c/utils/PRIVATE_chartUtils/legendUtils",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBLACCategoriesItems=e.getLegendData=e.LegendDefaults=void 0,e.LegendDefaults={rendered:"off",position:"auto"},e.getLegendData=function(e){return e.map((e=>({markerColor:e.color||e.areaColor,markerShape:"auto"!=e.markerShape?e.markerShape:"square",text:e.name||e.id,id:e.id})))},e.getBLACCategoriesItems=function(e,t,r,a,o){const i=[];return"none"===a&&"none"===o||e.forEach(((e,a)=>{t.forEach(((t,o)=>{const s=r(a,o);i.push({id:s.id,categories:s.categories||e.categories||[e.id]})})),i.push({id:e.id,categories:e.categories||[e.id]})})),i}})),define("oj-c/hooks/UNSAFE_useVizCategories/useVizCategories",["require","exports","@oracle/oraclejet-preact/hooks/UNSAFE_useCategories"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useVizCategories=void 0,e.useVizCategories=function(e,r,a,o,i="any",s="all",n,l){const{ids:d,updateCategories:u}=(0,t.useCategories)(e,r,a,i,!1,n),{ids:c,updateCategories:p}=(0,t.useCategories)(e,r,o,s,!0,l);return{hiddenIds:d,updateHidden:u,highlightedIds:c,updateHighlighted:p}}})),define("oj-c/hooks/UNSAFE_useLegendPosition/useLegendPosition",["require","exports","preact/hooks"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useLegendPosition=void 0,e.useLegendPosition=function(e,r){const[a,o]=(0,t.useState)("auto"===r?"end":r);return(0,t.useLayoutEffect)((()=>{if("auto"===r&&e.current){const t=e.current.getBoundingClientRect();t.height>t.width&&o("bottom")}}),[r,e]),a}})),define("oj-c/utils/PRIVATE_chartUtils/plotAreaUtils",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPlotArea=void 0,e.getPlotArea=function(e,t,r,a){return{color:e?.backgroundColor,yMajorTick:t?.rendered?{isRendered:"off"!==t?.rendered,...t}:t,yMinorTick:r?.rendered?{isRendered:r?.rendered&&"off"!==r?.rendered,...r}:r,xMajorTick:a?.rendered?{isRendered:a?.rendered&&"off"!==a?.rendered,...a}:a}}})),define("oj-c/area-chart/area-chart",["require","exports","preact/jsx-runtime","@oracle/oraclejet-preact/translationBundle","preact/hooks","@oracle/oraclejet-preact/UNSAFE_LineAreaChart","ojs/ojcontext","@oracle/oraclejet-preact/UNSAFE_Legend","@oracle/oraclejet-preact/UNSAFE_ChartWithLegend","ojs/ojvcomponent","../hooks/UNSAFE_useChartData/useChartData","../utils/PRIVATE_chartUtils/events","../utils/PRIVATE_chartUtils/legendUtils","../hooks/UNSAFE_useVizCategories/useVizCategories","../hooks/UNSAFE_useLegendPosition/useLegendPosition","../utils/PRIVATE_chartUtils/lineAreaUtils","../utils/PRIVATE_chartUtils/plotAreaUtils","css!oj-c/area-chart/area-chart-styles.css"],(function(require,e,t,r,a,o,i,s,n,l,d,u,c,p,h,g,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AreaChart=void 0,e.AreaChart=(0,l.registerCustomElement)("oj-c-area-chart",(function({data:e,hideAndShowBehavior:r="none",orientation:f="vertical",xAxis:y,yAxis:v,hoverBehavior:D="none",valueFormats:k,plotArea:b,zoomAndScroll:C,itemTemplate:j,seriesTemplate:A,groupTemplate:S,seriesComparator:_,groupComparator:P,drilling:E="off",hiddenCategories:I=[],highlightedCategories:x=[],highlightMatch:U="any",selection:L=[],selectionMode:V="none",stack:M="off",legend:T={rendered:"on",position:"auto"},...w}){const z=(0,a.useRef)(null),F=(0,a.useCallback)((e=>z.current?i.getContext(z.current).getBusyContext().addBusyState({description:`oj-c-area-chart: ${e}`}):()=>{}),[]),{series:O,groups:R,getDataItem:B}=(0,d.useChartData)(e,F,j,A,S,"oj-c-area-chart-item","oj-c-area-chart-series","oj-c-area-chart-group",_,P),{majorTick:N,...H}=y??{},{majorTick:q,minorTick:W,...G}=v??{},{itemDrillHandler:K,groupDrillHandler:Y,seriesDrillHandler:$}=(0,u.getChartEventsHandler)(O,R,E,w.onOjItemDrill,w.onOjGroupDrill,w.onOjSeriesDrill),J=(0,c.getBLACCategoriesItems)(O,R,B,D,r),{hiddenIds:Q,updateHidden:X,highlightedIds:Z,updateHighlighted:ee}=(0,p.useVizCategories)(J,(e=>e.categories),I,x,"any",U,w.onHiddenCategoriesChanged,w.onHighlightedCategoriesChanged),te=(0,h.useLegendPosition)(z,T.position||c.LegendDefaults.position),re="off"!=(T.rendered||c.LegendDefaults.rendered),ae=(0,c.getLegendData)(O),oe="none"!=r||"none"!=D||"on"===E,ie=O.length>0&&R.length>0?(0,t.jsx)(o.LineAreaChart,{type:"area",width:"100%",height:"100%",series:O,groups:R,getDataItem:B,onItemInput:e=>{if("none"===D)return;const t=(0,u.getIdFromDetail)(e,O,B);ee(t)},drilling:E,onItemDrill:K,onGroupDrill:Y,onSelectionChange:e=>{w.onSelectionChanged?.(e.ids)},selectionMode:V,selectedIds:"none"===V?void 0:L,orientation:f,xAxis:H,yAxis:G,highlightedIds:0===Z.length?void 0:Z,hiddenIds:Q,plotArea:(0,m.getPlotArea)(b,q,W,N),hideAndShowBehavior:r,hoverBehavior:D,isStacked:"on"===M,valueFormats:(0,g.transformValueFormats)(k),"aria-label":w["aria-label"],"aria-describedBy":w["aria-describedby"],"aria-labelledBy":w["aria-labelledby"]}):void 0,se=re&&ae.length>0?(0,t.jsx)(s.Legend,{items:ae,orientation:"start"===te||"end"===te?"vertical":"horizontal",isReadOnly:!oe,highlightedIds:0===Z.length?void 0:Z,hiddenIds:0===Q.length?void 0:Q,symbolHeight:T.symbolHeight,symbolWidth:T.symbolWidth,onItemAction:e=>{"none"==r?$(e):X(e.itemId)},onInput:e=>{"none"!=D&&ee(e.itemId)}}):void 0;return(0,t.jsx)(l.Root,{ref:z,children:(0,t.jsx)(n.ChartWithLegend,{chart:ie,position:te,maxSize:T.maxSize,size:T.size,legend:se})})}),"AreaChart",{properties:{data:{type:"DataProvider|null"},seriesComparator:{type:"function"},groupComparator:{type:"function"},stack:{type:"string",enumValues:["off","on"]},drilling:{type:"string",enumValues:["off","on"]},orientation:{type:"string",enumValues:["horizontal","vertical"]},yAxis:{type:"object",properties:{majorTick:{type:"object",properties:{lineStyle:{type:"string",enumValues:["dashed","dotted","solid"]},lineWidth:{type:"number"},lineColor:{type:"string"},rendered:{type:"string",enumValues:["auto","off","on"]}}},minorTick:{type:"object",properties:{lineStyle:{type:"string",enumValues:["dashed","dotted","solid"]},lineWidth:{type:"number"},lineColor:{type:"string"},rendered:{type:"string",enumValues:["auto","off","on"]}}}}},xAxis:{type:"object",properties:{majorTick:{type:"object",properties:{lineStyle:{type:"string",enumValues:["dashed","dotted","solid"]},lineWidth:{type:"number"},lineColor:{type:"string"},rendered:{type:"string",enumValues:["auto","off","on"]}}}}},plotArea:{type:"object",properties:{backgroundColor:{type:"string"}}},zoomAndScroll:{type:"string",enumValues:["off","live"]},valueFormats:{type:"object",properties:{group:{type:"object",properties:{tooltipLabel:{type:"string"},tooltipDisplay:{type:"string",enumValues:["auto","off"]}}},series:{type:"object",properties:{tooltipLabel:{type:"string"},tooltipDisplay:{type:"string",enumValues:["auto","off"]}}},value:{type:"object",properties:{converter:{type:"any"},tooltipLabel:{type:"string"},tooltipDisplay:{type:"string",enumValues:["auto","off"]}}}}},selectionMode:{type:"string",enumValues:["none","multiple","single"]},selection:{type:"Array<any>",writeback:!0},hiddenCategories:{type:"Array<string>",writeback:!0},highlightedCategories:{type:"Array<string>",writeback:!0},hideAndShowBehavior:{type:"string",enumValues:["none","withoutRescale","withRescale"]},hoverBehavior:{type:"string",enumValues:["none","dim"]},highlightMatch:{type:"string",enumValues:["all","any"]},legend:{type:"object",properties:{position:{type:"string",enumValues:["auto","end","start","top","bottom"]},rendered:{type:"string",enumValues:["auto","off","on"]},maxSize:{type:"number|string"},size:{type:"number|string"},symbolHeight:{type:"number"},symbolWidth:{type:"number"}}}},slots:{itemTemplate:{data:{}},seriesTemplate:{data:{}},groupTemplate:{data:{}}},events:{ojViewportChange:{},ojItemDrill:{},ojGroupDrill:{},ojSeriesDrill:{}},extension:{_WRITEBACK_PROPS:["selection","hiddenCategories","highlightedCategories"],_READ_ONLY_PROPS:[],_OBSERVED_GLOBAL_PROPS:["aria-label","aria-describedby","aria-labelledby"]}},{hideAndShowBehavior:"none",orientation:"vertical",hoverBehavior:"none",drilling:"off",hiddenCategories:[],highlightedCategories:[],highlightMatch:"any",selection:[],selectionMode:"none",stack:"off",legend:{rendered:"on",position:"auto"}},{"@oracle/oraclejet-preact":r.default})}));
//# sourceMappingURL=area-chart.js.map