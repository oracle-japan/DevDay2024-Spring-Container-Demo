define(['exports', 'preact/hooks', './useToggle-bb6b1322'], (function(e,r,n){"use strict";e.useSpinning=({isStepDownDisabled:e,isStepUpDisabled:t,onSpin:o,onSpinComplete:u,onStep:c})=>{const{bool:s,setTrue:a,setFalse:l}=n.useToggle(!1),{bool:i,setTrue:p,setFalse:P}=n.useToggle(!1),f=r.useRef(null),w=r.useRef(null),d=r.useRef("increase"),k=r.useRef(!1),D=r.useCallback((r=>{"ArrowDown"!==r.key&&"ArrowUp"!==r.key||(r.preventDefault(),r.stopPropagation(),s||"ArrowDown"===r.key&&e||"ArrowUp"===r.key&&t||(d.current="ArrowDown"===r.key?"decrease":"increase",a(),c?.({direction:d.current})))}),[s,c,e,t,a]),b=r.useCallback((e=>{"ArrowDown"!==e.key&&"ArrowUp"!==e.key||(i&&(k.current=!0),l(),P(),e.stopPropagation())}),[i,l,P]),g=r.useCallback((e=>{e.stopPropagation(),e.preventDefault(),t||(d.current="increase",a(),c?.({direction:d.current}))}),[c,t,a]),y=r.useCallback((r=>{r.stopPropagation(),r.preventDefault(),e||(d.current="decrease",a(),c?.({direction:d.current}))}),[c,e,a]),C=r.useCallback((e=>{i&&(k.current=!0),l(),P(),e.stopPropagation()}),[i,l,P]);r.useEffect((()=>(s&&!f.current&&(f.current=setTimeout((()=>{p()}),500)),()=>{f.current&&(clearTimeout(f.current),f.current=null)})),[s,p]),r.useEffect((()=>(i?w.current||(w.current=setInterval((()=>{"increase"===d.current&&t||"decrease"===d.current&&e?(P(),k.current=!0):o?.({direction:d.current})}),40)):w.current&&(clearInterval(w.current),w.current=null),()=>{w.current&&(clearInterval(w.current),w.current=null)})),[i,e,t,o,P]),r.useEffect((()=>{!i&&k.current&&(k.current=!1,u?.())}),[i,u]);return{keyboardHandlerProps:{onKeyDown:D,onKeyUp:b},pointerIncreaseHandlerProps:{onPointerDown:g,onPointerUp:C,onPointerOut:C,onPointerCancel:C},pointerDecreaseHandlerProps:{onPointerDown:y,onPointerUp:C,onPointerOut:C,onPointerCancel:C}}}}));
//# sourceMappingURL=useSpinning-d2050573.js.map
