{"version":3,"file":"MaxLengthLiveRegion-e5aa0a3c.js","sources":["../../src/UNSAFE_TextField/MaxLengthLiveRegion.tsx"],"sourcesContent":["import { Fragment } from 'preact';\nimport { useDebounce } from '../hooks/UNSAFE_useDebounce';\nimport { useTranslationBundle } from '../hooks/UNSAFE_useTranslationBundle';\nimport { BundleType } from '../resources/nls/bundle';\nimport { LiveRegion } from '../UNSAFE_LiveRegion';\n\ntype Props = {\n  isMaxLengthExceeded?: boolean;\n  maxLength: number;\n  valueLength?: number;\n};\n\nconst MAX_LENGTH_UPDATE_DELAY = 500;\n\nexport function MaxLengthLiveRegion({ isMaxLengthExceeded, maxLength, valueLength = 0 }: Props) {\n  // Comment copied from InputBase.js in Big JET:\n  // Only update the aria-live div when the user has paused for more than\n  // 500 milliseconds. That way, we avoid queued up aria-live messages which\n  // would be annoying and not helpful. The 500ms was agreed upon in the\n  // accessibility review meeting.\n  const debouncedRemainingChars = useDebounce(maxLength - valueLength, MAX_LENGTH_UPDATE_DELAY);\n  const translations = useTranslationBundle<BundleType>('@oracle/oraclejet-preact');\n  const maxLengthExceededTranslatedString = translations.formControl_maxLengthExceeded({\n    MAX_LENGTH: `${maxLength}`\n  });\n  const remainingCharsTranslatedString = translations.formControl_maxLengthRemaining({\n    CHARACTER_COUNT: `${debouncedRemainingChars}`\n  });\n\n  return (\n    <Fragment>\n      <LiveRegion>{remainingCharsTranslatedString}</LiveRegion>\n      {isMaxLengthExceeded && (\n        <LiveRegion type=\"assertive\">{maxLengthExceededTranslatedString}</LiveRegion>\n      )}\n    </Fragment>\n  );\n}\n"],"names":["isMaxLengthExceeded","maxLength","valueLength","debouncedRemainingChars","useDebounce","translations","useTranslationBundle","maxLengthExceededTranslatedString","formControl_maxLengthExceeded","MAX_LENGTH","remainingCharsTranslatedString","formControl_maxLengthRemaining","CHARACTER_COUNT","_jsxs","jsxs","Fragment","children","_jsx","jsx","LiveRegion","type"],"mappings":"8LAcM,UAA8BA,oBAAEA,EAAmBC,UAAEA,EAASC,YAAEA,EAAc,IAMlF,MAAMC,EAA0BC,EAAWA,YAACH,EAAYC,EAR1B,KASxBG,EAAeC,uBAAiC,4BAChDC,EAAoCF,EAAaG,8BAA8B,CACnFC,WAAY,GAAGR,MAEXS,EAAiCL,EAAaM,+BAA+B,CACjFC,gBAAiB,GAAGT,MAGtB,OACEU,EAACC,KAAAC,WACC,CAAAC,SAAA,CAAAC,EAAAC,IAACC,aAAY,CAAAH,SAAAN,IACZV,GACCiB,MAACE,EAAAA,WAAW,CAAAC,KAAK,YAAaJ,SAAAT,MAItC"}