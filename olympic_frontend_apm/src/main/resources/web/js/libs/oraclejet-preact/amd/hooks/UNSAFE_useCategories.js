define(['exports', 'preact/hooks'], (function(e,t){"use strict";const r=(e,t)=>e.size===t.size&&[...e].every((e=>t.has(e))),n=(e,t)=>{const r=new Set(e);return t.forEach((t=>{e.has(t)?r.delete(t):r.add(t)})),r};function c(e,t="any",r){return[...r].reduce(((r,n,c)=>{const o=e.get(n);return"any"===t?o?new Set([...r,...o]):r:c?new Set([...r].filter((e=>o.has(e)))):o}),new Set)}e.useCategories=(e,o,u=[],s="all",a=!0,i)=>{const d=t.useMemo((()=>function(e,t){const r=new Map,n=new Map;return e.forEach((e=>{const c=e.id,o=t(e);n.set(c,new Set(o)),o.forEach((e=>{r.has(e)?r.get(e)?.add(c):r.set(e,new Set([c]))}))})),{categoryToItem:r,itemToCategory:n}}(e,o)),[e,o]),f=new Set(u),g=c(d.categoryToItem,s,f),w=t.useRef(f),l=t.useRef(g);r(g,l.current)||(l.current=g),r(w.current,f)||(w.current=f,i?.([...f]));return{ids:[...l.current],updateCategories:e=>{let t=null!=e?d.itemToCategory.get(e):new Set([]),o=c(d.categoryToItem,s,t);a||(o=n(l.current,o),t=n(w.current,t)),r(o,l.current)||(l.current=o),t&&!r(t,w.current)&&(w.current=t,i?.([...t]))}}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=UNSAFE_useCategories.js.map
