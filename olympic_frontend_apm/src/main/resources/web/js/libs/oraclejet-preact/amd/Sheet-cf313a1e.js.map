{"version":3,"file":"Sheet-cf313a1e.js","sources":["../../src/UNSAFE_Sheet/Sheet.tsx"],"sourcesContent":["import { JSX } from 'preact';\nimport { useCallback } from 'preact/hooks';\n\nimport { Modal } from '../UNSAFE_Modal';\nimport { WindowOverlay } from '../UNSAFE_WindowOverlay';\n//Temporal import.\nimport { useSheetSwipe } from './useSheetSwipe';\n\nimport { sheetMenuStyles } from './themes/SheetStyles.css';\n/*\n  pointerDismissed: Swipedown and tapScrim\n  keyboardDismissed: \"Escape\" | \"Tab\"\n*/\ntype CloseDetail = { reason: 'pointerDismissed' | 'keyboardDismissed' };\n\ntype IntrinsicProps = Pick<JSX.HTMLAttributes<HTMLDivElement>, 'children'>;\n\ntype SheetProps = IntrinsicProps & {\n  onClose?: (detail: CloseDetail) => void;\n  isOpen?: boolean;\n};\n\nexport const Sheet = ({ children, onClose, isOpen = false }: SheetProps) => {\n  const handlePointerDismissed = useCallback(() => {\n    onClose?.({ reason: 'pointerDismissed' });\n  }, [onClose]);\n\n  // TODO: Use useSwipe when it works on components that could scroll. Important to notice all components that have a\n  // sheet will use this comp and this comp is going to use useSwipe. So comps that have their own impl (menu right now),\n  // will stop having its own implementation\n  const { swipeProps } = useSheetSwipe(handlePointerDismissed);\n\n  const handleKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      if (event.defaultPrevented) {\n        return;\n      }\n      switch (event.code) {\n        case 'Tab':\n        case 'Escape':\n          onClose?.({ reason: 'keyboardDismissed' });\n        default:\n          break;\n      }\n    },\n    [onClose]\n  );\n\n  return (\n    <Modal isOpen={isOpen} onBackdropClick={handlePointerDismissed}>\n      <WindowOverlay placement=\"bottom\">\n        <div\n          {...swipeProps}\n          class={sheetMenuStyles.sheetMenuContainerWrapper}\n          style={{ maxHeight: `calc(100vh - ${TOP_OFFSET}px)` }}\n          onKeyDown={handleKeyDown}>\n          {children}\n        </div>\n      </WindowOverlay>\n    </Modal>\n  );\n};\n\nconst TOP_OFFSET = 96;\n"],"names":["TOP_OFFSET","children","onClose","isOpen","handlePointerDismissed","useCallback","reason","swipeProps","useSheetSwipe","handleKeyDown","event","defaultPrevented","code","_jsx","Modal","onBackdropClick","jsx","WindowOverlay","placement","class","sheetMenuStyles","sheetMenuContainerWrapper","style","maxHeight","onKeyDown"],"mappings":"8MAsBO,MAyCDA,EAAa,WAzCE,EAAGC,WAAUC,UAASC,UAAS,MAClD,MAAMC,EAAyBC,EAAAA,aAAY,KACzCH,IAAU,CAAEI,OAAQ,oBAAqB,GACxC,CAACJ,KAKEK,WAAEA,GAAeC,EAAaA,cAACJ,GAE/BK,EAAgBJ,eACnBK,IACC,IAAIA,EAAMC,iBAGV,OAAQD,EAAME,MACZ,IAAK,MACL,IAAK,SACHV,IAAU,CAAEI,OAAQ,sBAGvB,GAEH,CAACJ,IAGH,OACEW,EAAAA,IAACC,EAAAA,MAAK,CAACX,OAAQA,EAAQY,gBAAiBX,EACtCH,SAAAY,EAAAG,IAACC,EAAaA,cAAC,CAAAC,UAAU,SAAQjB,SAC/BY,EACMG,IAAA,MAAA,IAAAT,EACJY,MAAOC,EAAAA,gBAAgBC,0BACvBC,MAAO,CAAEC,UAAW,gBAAgBvB,QACpCwB,UAAWf,EAAaR,SACvBA,OAIP"}