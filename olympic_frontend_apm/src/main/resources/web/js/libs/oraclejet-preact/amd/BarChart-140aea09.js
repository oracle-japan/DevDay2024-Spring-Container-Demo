define(['exports', 'preact/jsx-runtime', './useUser-8e4e5333', 'preact', './UNSAFE_Chart/themes/ChartStyles.css', './classNames-62eaa01c', './layoutUtils-a2537680', './useTranslationBundle-1a7cf79b', './navUtils-a48e6198', './accUtils-8478d1b2', './Chart-aba7440b', './colorUtils-f4fa6bec'], (function(e,t,r,i,s,n,o,a,d,l,c,u){"use strict";const I=2,g=.25;function h(e,t,r,i,s,n,o){const a=n?1:i,d=I*s,l=(t*(1-r)-(a-1)*d)/a;if(n)return{barWidth:l,offset:-1*l/2,itemsGaps:d};const c=t/2,u=t*(r/2)+e*(l+I*s);return{barWidth:l,offset:o?c-u-l:u-c,itemsGaps:d}}const f=1.5,x=2.5;function m(e){return e.isSelected||e.isFocused?t.jsx(p,{...e}):t.jsx("rect",{x:e.x,y:e.y,"data-oj-series-index":e.seriesIndex,"data-oj-group-index":e.groupIndex,"data-oj-object":"bar","aria-label":e["aria-label"],role:e["aria-label"]?"img":void 0,id:e.activeId,style:{width:e.width,height:e.height,fill:e.fill,cursor:e.isDrillable?"pointer":"",stroke:e.stroke,strokeWidth:e.strokeWidth},class:n.classNames([e.isDrillable?s.styles.interactiveStyle:void 0,e.isDimmed?s.styles.dimmed:void 0])})}function p(e){const{x:r,y:i,width:o,height:a,fill:d,isSelected:l,isFocused:c}=e,u=l?x:f;return t.jsxs("g",{id:e.activeId,"data-oj-object":"bar","data-oj-series-index":e.seriesIndex,"data-oj-group-index":e.groupIndex,className:e.isDimmed?s.styles.dimmed:"",role:e["aria-label"]?"img":void 0,"aria-label":e["aria-label"],children:[t.jsx("rect",{x:r,y:i,class:n.classNames([l?s.styles.selectedBorder:""]),style:{width:o,height:a,fill:!l&&c?d:void 0}}),t.jsx("rect",{x:r+u,y:i+u,class:n.classNames([s.styles.contrastBorder,e.isDrillable?s.styles.interactiveStyle:void 0]),style:{width:o-2*u,height:a-2*u,fill:d}})]})}function b(e,t,r){return{fill:e.color||t.color||r,stroke:e.borderColor||t.borderColor}}function v(e,t,r,i,s){let n,o,a,d,l=e,c=t,u=t-e;return u<1&&(l=Math.floor(l),c=l+1,u=1),s?(o=l,n=r>i?i:r,a=Math.abs(i-r),d=Math.abs(c-l)):(n=l,o=r>i?i:r,a=Math.abs(c-l),d=Math.abs(i-r)),{x:n,y:o,width:a,height:d}}function S(e,t,r,i,s,n,o){let a,d;return r?(a=t.transform(e<0?n:o),n+=e<0?e:0,o+=e>0?e:0,d=t.transform(e<0?n:o),a+=d>a?s:-s):(a=i?t.range()[0]:t.transform(0),d=t.transform(e)),{baselineCoord:a,endCoord:d}}function y(e,t,r,i,s,n,o){const{baselineCoord:a,endCoord:d}=S(e,t,r,i,o,s,n);return(a+d)/2}function w({yScale:e,xScale:r,colors:s,series:n,groupIndex:c,hiddenIds:u,barGapRatio:I,dataItemGaps:g,groupWidth:f,highlightedIds:x,selectedIds:p,orientation:y,isLog:w,activeId:C,getDataItem:j,isRtl:A,isStacked:D,isSelectionEnabled:G,focusedItemInfo:N,hoveredItemInfo:R,isDrillEnabled:W,group:k,timeAxisType:U}){const B="horizontal"===y,F=[],M=n.length;let E=w?e.domain()[0]:0,L=0;const P=a.useTranslationBundle("@oracle/oraclejet-preact");for(let t=0;t<M;t+=1){const a=j(t,c);if(!a||u?.has(a.id)||w&&a.value<=0)continue;const y=o.getGroupCenterCoord(k,c,r,a,U),T=N?.groupIndex===c&&N?.seriesIndex===t&&N?.isFocusVisible,z=R?.groupIndex===c&&R?.seriesIndex===t&&R?.isCurrent,$=!!T||!!z&&G,V=T&&N.isCurrent||z,_=void 0===x||x.has(a.id),q=!!p?.has(a.id),H="on"===a.drilling||"off"!=a.drilling&&W,{barWidth:J,offset:K,itemsGaps:O}=h(t,f,I,M,g,D,A),Q=y+K,X=Q+J,{baselineCoord:Y,endCoord:Z}=S(a.value,e,D,w,O,L,E);L+=a.value<0?a.value:0,E+=a.value>0?a.value:0;const ee=b(a,n[t],s?.[t]),te=v(Q,X,Z,Y,B),re=l.supportsMobileScreenReader||V?d.getItemAriaLabel(P,n[t].name||n[t].id.toString(),k.name||k.id,a.value,G,q,H,a.accessibleLabel):"";F.push(i.createElement(m,{...te,...ee,seriesIndex:t,groupIndex:c,isFocused:$,activeId:V?C:"","aria-label":re,isDimmed:!_,isSelected:q,isDrillable:H,key:`${c};${t}`}))}return t.jsx(t.Fragment,{children:F})}function C(e,t,r,i){const s=d.getNextItemInGroup(e,r,i);if(s)return s;if(e.groupIndex<t){let s={seriesIndex:0,groupIndex:e.groupIndex+1};if(i(s.seriesIndex,s.groupIndex))return s;if(s=C(s,t,r,i),s)return s}return e}function j(e,t,r,i){const s=d.getPrevItemInGroup(e,i);if(s)return s;if(e.groupIndex>t){let s={groupIndex:e.groupIndex-1,seriesIndex:r-1};if(i(s.seriesIndex,s.groupIndex))return s;if(s=j(s,t,r,i),s)return s}return e}e.BarChart=function({width:e="100%",height:i="448px",selectedIds:s=[],hiddenIds:n=[],highlightedIds:a,hideAndShowBehavior:l="none",orientation:I="vertical",yAxis:f,series:x,groups:m,isStacked:p=!1,getDataItem:b,selectionMode:A="none",drilling:D="off",dataItemGaps:G=.5,...N}){const{direction:R}=r.useUser(),W="rtl"===R,k=new Set(n),U="horizontal"===I,B=new Set(s),F=new Set(a),M=u.getColorRamp();return t.jsx(c.Chart,{width:e,height:i,selectedIds:s,hiddenIds:n,hideAndShowBehavior:l,orientation:I,yAxis:f,series:x,groups:m,isStacked:p,getDataItem:b,selectionMode:A,drilling:D,renderGridLinesInFront:!1,findNearest:(e,t,r,i)=>{const s=function(e,t,r,i,s,n){return o=>{const{offset:a,barWidth:d}=h(o,e,t,r,i,s,n);return{offset:a,dataWidth:d}}}(r,i,x.length,G,p,W);return o.findNearestDataPoint(x,e,t,b,p,s,y,"log"===f?.scale,G,k)},getDataItemPos:(e,t,r,i)=>function(e,t,r,i,s,n,o,a,d,l,c,u){return(I,g)=>{const f=e.length;let x=0,m=0;for(let e=0;e<f;e+=1){const p=t(e,g);if(!p||s?.has(p.id)||d&&p.value<=0)continue;const b=r.transform(g),{barWidth:y,offset:w,itemsGaps:C}=h(e,o,a,f,n,l,c),j=b+w,A=j+y,{baselineCoord:D,endCoord:G}=S(p.value,i,l,d,C,m,x);if(m+=p.value<0?p.value:0,x+=p.value>0?p.value:0,I===e)return v(j,A,G,D,u)}}}(x,b,e,t,k,G,r,i,"log"===f?.scale,p,W,U),getNavUtil:(e,t)=>function(e,t,r,i,s,n){const o=(t,r)=>{const i=e(t,r);return Boolean(i)};return(e,a)=>{if(!s&&("ArrowDown"===a||"ArrowUp"===a))return e;let l;const c={groupIndex:e.groupIndex,seriesIndex:e.seriesIndex};return c.groupIndex<r?(c.groupIndex=r,c):c.groupIndex>i?(c.groupIndex=i,c):(s?l="ArrowLeft"===a?n?d.getNextItemInSeries(c,i,o):d.getPrevItemInSeries(c,r,o):"ArrowRight"===a?n?d.getPrevItemInSeries(c,r,o):d.getNextItemInSeries(c,i,o):"ArrowDown"===a?d.getPrevItemInGroup(c,o):d.getNextItemInGroup(c,t,o):"ArrowRight"===a?l=n?j(c,r,t,o):C(c,i,t,o):"ArrowLeft"===a&&(l=n?C(c,i,t,o):j(c,r,t,o)),l||c)}}(b,x.length,e,t,p,W),getGapRatio:(e,t)=>function(e,t,r){return e?.37+.26/(r-t+1):g}(p,e,t),isRtl:W,offset:.5,...N,children:({xStartIndex:e,xEndIndex:r,xScale:i,yScale:s,gapRatio:n,activeId:o,focusedItemInfo:d,hoveredItemInfo:l,groupWidth:c})=>t.jsx(t.Fragment,{children:m.slice(e,r+1).map(((r,u)=>t.jsx(w,{yScale:s,xScale:i,groupIndex:u+e,selectedIds:B,hiddenIds:k,highlightedIds:a?F:a,isDrillEnabled:"on"===D,series:x,barGapRatio:n,dataItemGaps:G,isStacked:p,groupWidth:c,group:m[u],timeAxisType:N.xAxis?.timeAxisType,colors:M,activeId:o,isLog:"log"===f?.scale,orientation:I,getDataItem:b,isSelectionEnabled:"none"!=A,isRtl:W,focusedItemInfo:d,hoveredItemInfo:l})))})})}}));
//# sourceMappingURL=BarChart-140aea09.js.map
